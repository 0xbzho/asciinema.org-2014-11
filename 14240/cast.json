[[0.039836,{"lines":{"0":[["$                                                                               ",{}]],"1":[["                                                                                ",{}]],"2":[["                                                                                ",{}]],"3":[["                                                                                ",{}]],"4":[["                                                                                ",{}]],"5":[["                                                                                ",{}]],"6":[["                                                                                ",{}]],"7":[["                                                                                ",{}]],"8":[["                                                                                ",{}]],"9":[["                                                                                ",{}]],"10":[["                                                                                ",{}]],"11":[["                                                                                ",{}]],"12":[["                                                                                ",{}]],"13":[["                                                                                ",{}]],"14":[["                                                                                ",{}]],"15":[["                                                                                ",{}]],"16":[["                                                                                ",{}]],"17":[["                                                                                ",{}]],"18":[["                                                                                ",{}]],"19":[["                                                                                ",{}]],"20":[["                                                                                ",{}]]},"cursor":{"x":2,"y":0,"visible":true}}],[0.742692,{"lines":{"0":[["$ v                                                                             ",{}]]},"cursor":{"x":3}}],[0.08268,{"lines":{"0":[["$ vi                                                                            ",{}]]},"cursor":{"x":4}}],[0.115116,{"cursor":{"x":5}}],[0.10001,{"lines":{"0":[["$ vi s                                                                          ",{}]]},"cursor":{"x":6}}],[0.057889,{"lines":{"0":[["$ vi se                                                                         ",{}]]},"cursor":{"x":7}}],[0.175449,{"lines":{"0":[["$ vi self-updater.sh                                                            ",{}]]},"cursor":{"x":21}}],[0.40073,{"cursor":{"x":0,"y":1}}],[0.003303,{"lines":{"0":[["#/bin/bash                                                                      ",{}]],"1":[["# Create: 2014-05-14 John C. Petrucci( http://johncpetrucci.com )               ",{}]],"2":[["# Modify: 2014-05-15 John C. Petrucci                                           ",{}]],"3":[["# Purpose: Function to retrieve latest version of a script and replace self if u",{}]],"4":[["ser wants.                                                                      ",{}]],"5":[["# Usage: Update the variable masterURL with a path that the script will be retri",{}]],"6":[["eved from.  Script will compare its own \"Modify\" comment line with the master.  ",{}]],"7":[["# ... For a PoC download this script and append a character to the \"Modify:\" lin",{}]],"8":[["e.  For value added change the final echo to say 'This is the body BEFORE UPDATI",{}]],"9":[["NG'.                                                                            ",{}]],"10":[["#                                                                               ",{}]],"12":[["masterURL='http://johncpetrucci.com/archive/self-updater.sh'                    ",{}]],"13":[["latestFile=$(curl \"$masterURL\" 2>/dev/null) || { printf '%s\\n' 'Unable to check ",{}]],"14":[["for updates.'; curlFailed=1; }                                                  ",{}]],"15":[["thisMod=$(grep -m1 '# Modify: ' $0)                                             ",{}]],"16":[["latestMod=$(grep -m1 '# Modify: ' <<<\"$latestFile\")                             ",{}]],"18":[["doUpdate() {                                                                    ",{}]],"19":[["        newTmp=$(mktemp)                                                        ",{}]],"20":[["\"self-updater.sh\" 34 lines, 1433 characters                                     ",{}]]},"cursor":{"y":0}}],[0.7568,{"lines":{"0":[["        cat <<<\"$latestFile\" > \"$newTmp\"                                        ",{}]],"1":[["        ( \"$newTmp\"; mv \"$newTmp\" \"$0\" )                                        ",{}]],"2":[["        exit                                                                    ",{}]],"3":[["}                                                                               ",{}]],"4":[["                                                                                ",{}]],"5":[["offerUpdate() {                                                                 ",{}]],"6":[["        while IFS= read -n1 -r -p 'An update for this script is available.  Use ",{}]],"7":[["latest version? [y/n]: '; do                                                    ",{}]],"8":[["                case $REPLY in                                                  ",{}]],"9":[["                        [Yy] )  printf '\\n%s\\n' 'Updating now.'; doUpdate; break",{}]],"10":[[";;                                                                              ",{}]],"11":[["                        [Nn] )  printf '\\n%s\\n' 'Update was refused.'; break;;  ",{}]],"12":[["                        * )     printf '\\r';                                    ",{}]],"13":[["                esac                                                            ",{}]],"14":[["        done                                                                    ",{}]],"15":[["}                                                                               ",{}]],"16":[["                                                                                ",{}]],"17":[["[[ \"$thisMod\" != \"$latestMod\" && ! -n \"$curlFailed\" ]] && offerUpdate           ",{}]],"18":[["                                                                                ",{}]],"19":[["echo \"This is the body of the program.\"                                         ",{}]],"20":[["                                                                                ",{}]]},"cursor":{"y":19}}],[1.263994,{"cursor":{"x":38}}],[0.668289,{"cursor":{"x":37}}],[0.752845,{"lines":{"19":[["echo \"This is the body of the program .\"                                        ",{}]]},"cursor":{"x":38}}],[0.751915,{"lines":{"19":[["echo \"This is the body of the program b.\"                                       ",{}]]},"cursor":{"x":39}}],[0.013952,{"lines":{"19":[["echo \"This is the body of the program be.\"                                      ",{}]]},"cursor":{"x":40}}],[0.156205,{"lines":{"19":[["echo \"This is the body of the program bef.\"                                     ",{}]]},"cursor":{"x":41}}],[0.161101,{"lines":{"19":[["echo \"This is the body of the program befo.\"                                    ",{}]]},"cursor":{"x":42}}],[0.078724,{"lines":{"19":[["echo \"This is the body of the program befor.\"                                   ",{}]]},"cursor":{"x":43}}],[0.060989,{"lines":{"19":[["echo \"This is the body of the program before.\"                                  ",{}]]},"cursor":{"x":44}}],[0.373149,{"lines":{"19":[["echo \"This is the body of the program before .\"                                 ",{}]]},"cursor":{"x":45}}],[0.145012,{"lines":{"19":[["echo \"This is the body of the program before u.\"                                ",{}]]},"cursor":{"x":46}}],[0.155987,{"lines":{"19":[["echo \"This is the body of the program before up.\"                               ",{}]]},"cursor":{"x":47}}],[0.100017,{"lines":{"19":[["echo \"This is the body of the program before upd.\"                              ",{}]]},"cursor":{"x":48}}],[0.07813000000000001,{"lines":{"19":[["echo \"This is the body of the program before upda.\"                             ",{}]]},"cursor":{"x":49}}],[0.187851,{"lines":{"19":[["echo \"This is the body of the program before updat.\"                            ",{}]]},"cursor":{"x":50}}],[0.118551,{"lines":{"19":[["echo \"This is the body of the program before updati.\"                           ",{}]]},"cursor":{"x":51}}],[0.07944900000000001,{"lines":{"19":[["echo \"This is the body of the program before updatin.\"                          ",{}]]},"cursor":{"x":52}}],[0.420067,{"lines":{"19":[["echo \"This is the body of the program before updating.\"                         ",{}]]},"cursor":{"x":53}}],[0.560019,{"cursor":{"x":52}}],[0.279286,{"lines":{"20":[[":                                                                               ",{}]]},"cursor":{"x":1,"y":20,"visible":false}}],[0.000151,{"cursor":{"visible":true}}],[1.724636,{"cursor":{"x":0}}],[0.000118,{"cursor":{"x":52,"y":19}}],[0.143897,{}],[1.001243,{}],[1.107005,{"lines":{"0":[["#/bin/bash                                                                      ",{}]],"1":[["# Create: 2014-05-14 John C. Petrucci( http://johncpetrucci.com )               ",{}]],"2":[["# Modify: 2014-05-15 John C. Petrucci                                           ",{}]],"3":[["# Purpose: Function to retrieve latest version of a script and replace self if u",{}]],"4":[["ser wants.                                                                      ",{}]],"5":[["# Usage: Update the variable masterURL with a path that the script will be retri",{}]],"6":[["eved from.  Script will compare its own \"Modify\" comment line with the master.  ",{}]],"7":[["# ... For a PoC download this script and append a character to the \"Modify:\" lin",{}]],"8":[["e.  For value added change the final echo to say 'This is the body BEFORE UPDATI",{}]],"9":[["NG'.                                                                            ",{}]],"10":[["#                                                                               ",{}]],"11":[["                                                                                ",{}]],"12":[["masterURL='http://johncpetrucci.com/archive/self-updater.sh'                    ",{}]],"13":[["latestFile=$(curl \"$masterURL\" 2>/dev/null) || { printf '%s\\n' 'Unable to check ",{}]],"14":[["for updates.'; curlFailed=1; }                                                  ",{}]],"15":[["thisMod=$(grep -m1 '# Modify: ' $0)                                             ",{}]],"16":[["latestMod=$(grep -m1 '# Modify: ' <<<\"$latestFile\")                             ",{}]],"17":[["                                                                                ",{}]],"18":[["doUpdate() {                                                                    ",{}]],"19":[["        newTmp=$(mktemp)                                                        ",{}]],"20":[["                                                                                ",{}]]},"cursor":{"x":0,"y":0}}],[1.040843,{"cursor":{"y":1}}],[0.15513,{"cursor":{"y":2}}],[0.770093,{"cursor":{"x":1}}],[0.132332,{"cursor":{"x":2}}],[0.496633,{"cursor":{"x":3}}],[0.046839,{"cursor":{"x":4}}],[0.023917,{"cursor":{"x":5}}],[0.032348,{"cursor":{"x":6}}],[0.028862,{"cursor":{"x":7}}],[0.032733,{"cursor":{"x":8}}],[0.033082,{"cursor":{"x":9}}],[0.03298,{"cursor":{"x":10}}],[0.03307,{"cursor":{"x":11}}],[0.033119,{"cursor":{"x":12}}],[0.032751,{"cursor":{"x":13}}],[1.576661,{"lines":{"2":[["# Modify: 201-05-15 John C. Petrucci                                            ",{}]]}}],[0.8407750000000001,{"lines":{"2":[["# Modify: 2013-05-15 John C. Petrucci                                           ",{}]]},"cursor":{"x":14}}],[0.355116,{"cursor":{"x":13}}],[0.6957989999999999,{"lines":{"20":[[":                                                                               ",{}]]},"cursor":{"x":1,"y":20,"visible":false}}],[5.8e-05,{"cursor":{"visible":true}}],[0.552135,{"lines":{"20":[[":w                                                                              ",{}]]},"cursor":{"x":2}}],[0.039808,{"lines":{"20":[[":wq                                                                             ",{}]]},"cursor":{"x":3}}],[1.493199,{"cursor":{"x":0}}],[0.000149,{"lines":{"20":[["\"self-updater.sh\"                                                               ",{}]]},"cursor":{"x":17,"visible":false}}],[0.037087,{"lines":{"20":[["\"self-updater.sh\" 34 lines, 1449 characters written                             ",{}]]},"cursor":{"x":51}}],[0.0006039999999999999,{"lines":{"0":[["$ vi self-updater.sh                                                            ",{}]],"1":[["$                                                                               ",{}]],"2":[["                                                                                ",{}]],"3":[["                                                                                ",{}]],"4":[["                                                                                ",{}]],"5":[["                                                                                ",{}]],"6":[["                                                                                ",{}]],"7":[["                                                                                ",{}]],"8":[["                                                                                ",{}]],"9":[["                                                                                ",{}]],"10":[["                                                                                ",{}]],"12":[["                                                                                ",{}]],"13":[["                                                                                ",{}]],"14":[["                                                                                ",{}]],"15":[["                                                                                ",{}]],"16":[["                                                                                ",{}]],"18":[["                                                                                ",{}]],"19":[["                                                                                ",{}]],"20":[["                                                                                ",{}]]},"cursor":{"x":2,"y":1,"visible":true}}],[2.663285,{"lines":{"1":[["$ .                                                                             ",{}]]},"cursor":{"x":3}}],[0.078858,{"lines":{"1":[["$ ./                                                                            ",{}]]},"cursor":{"x":4}}],[0.288984,{"lines":{"1":[["$ ./s                                                                           ",{}]]},"cursor":{"x":5}}],[0.058053,{"lines":{"1":[["$ ./se                                                                          ",{}]]},"cursor":{"x":6}}],[0.195194,{"lines":{"1":[["$ ./self-updater.sh                                                             ",{}]]},"cursor":{"x":20}}],[0.340039,{"cursor":{"x":0,"y":2}}],[5.592457,{"lines":{"2":[["An update for this script is available.  Use latest version? [y/n]:             ",{}]]},"cursor":{"x":68}}],[4.717016,{"lines":{"2":[["An update for this script is available.  Use latest version? [y/n]: n           ",{}]]},"cursor":{"x":69}}],[0.001206,{"lines":{"3":[["Update was refused.                                                             ",{}]],"4":[["This is the body of the program before updating.                                ",{}]],"5":[["$                                                                               ",{}]]},"cursor":{"x":2,"y":5}}],[2.406714,{"lines":{"5":[["$ ./self-updater.sh                                                             ",{}]]},"cursor":{"x":20}}],[0.418301,{"cursor":{"x":0,"y":6}}],[0.082084,{"lines":{"6":[["An update for this script is available.  Use latest version? [y/n]:             ",{}]]},"cursor":{"x":68}}],[1.381904,{"lines":{"6":[["An update for this script is available.  Use latest version? [y/n]: y           ",{}]]},"cursor":{"x":69}}],[0.001227,{"lines":{"7":[["Updating now.                                                                   ",{}]]},"cursor":{"x":0,"y":8}}],[0.08595899999999999,{"lines":{"8":[["This is the body of the program.                                                ",{}]]},"cursor":{"x":32}}],[0.002133,{"lines":{"9":[["$                                                                               ",{}]]},"cursor":{"x":2,"y":9}}],[3.342668,{"lines":{"9":[["$ v                                                                             ",{}]]},"cursor":{"x":3}}],[0.059851,{"lines":{"9":[["$ vi                                                                            ",{}]]},"cursor":{"x":4}}],[0.168079,{"cursor":{"x":5}}],[0.558235,{"lines":{"9":[["$ vi s                                                                          ",{}]]},"cursor":{"x":6}}],[0.059673,{"lines":{"9":[["$ vi se                                                                         ",{}]]},"cursor":{"x":7}}],[0.164006,{"lines":{"9":[["$ vi self-updater.sh                                                            ",{}]]},"cursor":{"x":21}}],[0.9161629999999999,{"cursor":{"x":0,"y":10}}],[0.003162,{"lines":{"0":[["#/bin/bash                                                                      ",{}]],"1":[["# Create: 2014-05-14 John C. Petrucci( http://johncpetrucci.com )               ",{}]],"2":[["# Modify: 2014-05-15 John C. Petrucci                                           ",{}]],"3":[["# Purpose: Function to retrieve latest version of a script and replace self if u",{}]],"4":[["ser wants.                                                                      ",{}]],"5":[["# Usage: Update the variable masterURL with a path that the script will be retri",{}]],"6":[["eved from.  Script will compare its own \"Modify\" comment line with the master.  ",{}]],"7":[["# ... For a PoC download this script and append a character to the \"Modify:\" lin",{}]],"8":[["e.  For value added change the final echo to say 'This is the body BEFORE UPDATI",{}]],"9":[["NG'.                                                                            ",{}]],"10":[["#                                                                               ",{}]],"12":[["masterURL='http://johncpetrucci.com/archive/self-updater.sh'                    ",{}]],"13":[["latestFile=$(curl \"$masterURL\" 2>/dev/null) || { printf '%s\\n' 'Unable to check ",{}]],"14":[["for updates.'; curlFailed=1; }                                                  ",{}]],"15":[["thisMod=$(grep -m1 '# Modify: ' $0)                                             ",{}]],"16":[["latestMod=$(grep -m1 '# Modify: ' <<<\"$latestFile\")                             ",{}]],"18":[["doUpdate() {                                                                    ",{}]],"19":[["        newTmp=$(mktemp)                                                        ",{}]],"20":[["\"self-updater.sh\" 34 lines, 1433 characters                                     ",{}]]},"cursor":{"y":0}}],[0.554054,{"lines":{"20":[[":                                                                               ",{}]]},"cursor":{"x":1,"y":20,"visible":false}}],[9.2e-05,{"cursor":{"visible":true}}],[0.300862,{"lines":{"20":[[":s                                                                              ",{}]]},"cursor":{"x":2}}],[0.035971,{"lines":{"20":[[":se                                                                             ",{}]]},"cursor":{"x":3}}],[0.080037,{"lines":{"20":[[":set                                                                            ",{}]]},"cursor":{"x":4}}],[0.100906,{"cursor":{"x":5}}],[0.184051,{"lines":{"20":[[":set n                                                                          ",{}]]},"cursor":{"x":6}}],[0.067119,{"lines":{"20":[[":set no                                                                         ",{}]]},"cursor":{"x":7}}],[0.247956,{"lines":{"20":[[":set now                                                                        ",{}]]},"cursor":{"x":8}}],[0.101041,{"lines":{"20":[[":set nowr                                                                       ",{}]]},"cursor":{"x":9}}],[0.096792,{"lines":{"20":[[":set nowra                                                                      ",{}]]},"cursor":{"x":10}}],[0.099938,{"lines":{"20":[[":set nowrap                                                                     ",{}]]},"cursor":{"x":11}}],[0.150227,{"cursor":{"x":0}}],[0.000218,{"lines":{"4":[["# Usage: Update the variable masterURL with a path that the script will be retri",{}]],"5":[["# ... For a PoC download this script and append a character to the \"Modify:\" lin",{}]],"6":[["#                                                                               ",{}]],"7":[["                                                                                ",{}]],"8":[["masterURL='http://johncpetrucci.com/archive/self-updater.sh'                    ",{}]],"9":[["latestFile=$(curl \"$masterURL\" 2>/dev/null) || { printf '%s\\n' 'Unable to check ",{}]],"10":[["thisMod=$(grep -m1 '# Modify: ' $0)                                             ",{}]],"11":[["latestMod=$(grep -m1 '# Modify: ' <<<\"$latestFile\")                             ",{}]],"12":[["                                                                                ",{}]],"13":[["doUpdate() {                                                                    ",{}]],"14":[["        newTmp=$(mktemp)                                                        ",{}]],"15":[["        chmod +x \"$newTmp\"                                                      ",{}]],"16":[["        cat <<<\"$latestFile\" > \"$newTmp\"                                        ",{}]],"17":[["        ( \"$newTmp\"; mv \"$newTmp\" \"$0\" )                                        ",{}]],"18":[["        exit                                                                    ",{}]],"19":[["}                                                                               ",{}]]},"cursor":{"y":0}}],[1.609292,{"lines":{"0":[["        newTmp=$(mktemp)                                                        ",{}]],"1":[["        chmod +x \"$newTmp\"                                                      ",{}]],"2":[["        cat <<<\"$latestFile\" > \"$newTmp\"                                        ",{}]],"3":[["        ( \"$newTmp\"; mv \"$newTmp\" \"$0\" )                                        ",{}]],"4":[["        exit                                                                    ",{}]],"5":[["}                                                                               ",{}]],"6":[["                                                                                ",{}]],"7":[["offerUpdate() {                                                                 ",{}]],"8":[["        while IFS= read -n1 -r -p 'An update for this script is available.  Use ",{}]],"9":[["                case $REPLY in                                                  ",{}]],"10":[["                        [Yy] )  printf '\\n%s\\n' 'Updating now.'; doUpdate; break",{}]],"11":[["                        [Nn] )  printf '\\n%s\\n' 'Update was refused.'; break;;  ",{}]],"12":[["                        * )     printf '\\r';                                    ",{}]],"13":[["                esac                                                            ",{}]],"14":[["        done                                                                    ",{}]],"15":[["}                                                                               ",{}]],"16":[["                                                                                ",{}]],"17":[["[[ \"$thisMod\" != \"$latestMod\" && ! -n \"$curlFailed\" ]] && offerUpdate           ",{}]],"18":[["                                                                                ",{}]],"19":[["echo \"This is the body of the program.\"                                         ",{}]],"20":[["                                                                                ",{}]]},"cursor":{"y":19}}],[6.636763,{"lines":{"20":[[":                                                                               ",{}]]},"cursor":{"x":1,"y":20,"visible":false}}],[9.7e-05,{"cursor":{"visible":true}}],[0.220045,{"lines":{"20":[[":q                                                                              ",{}]]},"cursor":{"x":2}}],[0.156113,{"cursor":{"x":0}}],[0.000877,{"lines":{"0":[["$ vi self-updater.sh                                                            ",{}]],"1":[["$ ./self-updater.sh                                                             ",{}]],"2":[["An update for this script is available.  Use latest version? [y/n]: n           ",{}]],"3":[["Update was refused.                                                             ",{}]],"4":[["This is the body of the program before updating.                                ",{}]],"5":[["$ ./self-updater.sh                                                             ",{}]],"6":[["An update for this script is available.  Use latest version? [y/n]: y           ",{}]],"7":[["Updating now.                                                                   ",{}]],"8":[["This is the body of the program.                                                ",{}]],"9":[["$ vi self-updater.sh                                                            ",{}]],"10":[["$                                                                               ",{}]],"11":[["                                                                                ",{}]],"12":[["                                                                                ",{}]],"13":[["                                                                                ",{}]],"14":[["                                                                                ",{}]],"15":[["                                                                                ",{}]],"17":[["                                                                                ",{}]],"19":[["                                                                                ",{}]],"20":[["                                                                                ",{}]]},"cursor":{"x":2,"y":10}}],[1.08461,{"lines":{"10":[["$ exit                                                                          ",{}]]},"cursor":{"x":0,"y":11}}]]